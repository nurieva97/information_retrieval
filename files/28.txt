Освой Kotlin играючи
Сайт Александра Климова
/* Моя кошка замечательно разбирается в программировании. Стоит мне объяснить проблему ей - и все становится ясно. */ John Robbins, Debugging Applications, Microsoft Press, 2000
Статья проплачена кошками - всемирно известными производителями котят.
Если статья вам понравилась, то можете поддержать проект.
Любой кот линяет. Из выпавшей шерсти можно собрать второго кота. По такой же аналогии из Java можно создать новый язык Kotlin, образованный из двух слов Kot linяет. Есть ещё неправдоподобная версия об острове в Финском заливе, которая просто смешна и не заслуживает внимания.

17 мая 2017 года на Google IO объявили о поддержке Kotlin в Android Studio 3.0. Пора учить новый язык, который заслужил много лестных отзывов от опытных разработчиков.
В октябре 2018 года вышла версия Kotlin 1.3. Список новинок здесь.
Корутины вышли из экспериментального статуса.
Функцию main() можно использовать без параметров.
Появились беззнаковые типы: UByte (0...255), UShort (0...65535), UInt (0...2^32 - 1), ULong (0...2^64 - 1).
28 ноября 2017 года вышла новая версия Kotlin 1.2. Список новинок здесь.
Добавлены новые функции для изменяемых списков: fill, replaceAll, shuffle.
Добавлена новая функция shuffled для неизменяемых списков.
Добавлены математические функции. Например, можем узнать, что число является отрицательным.
Исходный код хранится в файлах с расширением .kt (почему не .kot?).
В языке используется "кошачий принцип" - чем меньше печатаешь код, тем больше времени останется на сон.
Например, необязательно ставить точку с запятой в конце выражения. Так поступает JavaScript и многие новые языки программирования.
Необязательно объявлять тип переменной, если из контекста понятно её предназначение. Если брать предыдущий пример, то по значению 1 можно догадаться, что переменная является типом Int.
Kotlin не делит типы на примитивные и их обёртки. Например, есть тип Int вместо int и Integer.
Можно сразу вызывать println вместо длинного System.out.println. Стандартная библиотека Kotlin включает в себя популярные методы Java для быстрого доступа.
Например, можно быстро получить содержимое файла с сервера через метод URL.readText():
В Java мы сначала указываем тип переменной, а потом её имя. В Kotlin немного не так. Сначала вы указываете ключевое слово val или var, затем имя переменной и по желанию можете указать тип переменной.
Если вы не инициализируете переменную, то тип указать нужно обязательно.
Иногда тип указывать обязательно.
Ключевое слово val (от слова value) ссылается на неизменяемую переменную, что соответствует ключевому слову final в Java.
А часто используемое выражение в Java можно заменить на конструкцию с ключевым словом const
Для обычных изменяемых переменных используется ключевое слово var (от слова variable).
Рекомендуется всегда использовать val, если это позволяет логика программы.
При этом нужно помнить, что хотя ссылка val неизменяема, сам объект может быть изменяемым:
При использовании var вы можете не указывать тип переменной, но это не значит, что вы можете использовать его не по назначению, это вам не PHP.
Ещё одно новое ключевое слово в Kotlin.
Чтобы не путаться с именами классов из разных пакетов, можно присвоить новый псевдоним.
Создадим собственное исключение.
Теперь можем кинуть созданное исключение в своём коде в нужном месте.
Сконвертировать существующий Java-код на Kotlin можно через меню Code | Convert Java File to Kotlin File.
Если скопировать в буфер обмена код на Java и вставить его в kt-файл, то студия автоматически сконвертирует код.
На заметку: Файлы с кодом на Kotlin смотрятся странно в папке java в проекте студии. Открываем файл gradle.build модуля и в секции android добавляем блок:
Переключаемся в режим Project и переименовываем папку java. Приложение будет работать по-прежнему. В режиме Android по-прежнему будет видна папка java, это жестко прописано в студии. Может потом поправят этот момент.
Также в студии есть целый раздел меню для настройки: Tools | Kotlin.
При выборе Show Kotlin Bytecode можно просматривать любой файл *.kt, в отдельном окне будет виден байткод файла. Если в нём не будет данных, которых нельзя представить в Java, то также будет доступна возможность декомпилировать его в Java-код кнопкой Decompile.
Интересная оболочка в виде командной строки. Можно быстро написать какое-то выражение и получить результат.
Библиотека Anko была специально разработана для удобного программирования под Android, сокращая количество кода для вызовов намерений, диалоговых окон, журналирования и т.д.
Android KTX
Hello Kitty
Щелчок кнопки/Счётчик ворон
SharedPreferences: Сохраняем настройки
Переключение между экранами приложения
Счётчик шагов
Запускаем фотосъёмку через Intent
Запускаем съёмку видео через Intent
ShareActionProvider (Провайдер действия передачи информации)
Android: ValueAnimator
RxKotlin
На русском языке доступна книга Kotlin в действии.
В начале книге перечисляются благодарности, в том числе - Наконец, мы хотели бы поблагодарить наши семьи и котов за то, что они делают этот мир лучше.
